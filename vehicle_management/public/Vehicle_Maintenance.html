<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ุฅุฏุงุฑุฉ ุตูุงูุฉ ุงููุฑูุจุงุช</title>
  <link rel="stylesheet" href="/vehicle_management/assets/css/Vehicle_Maintenance.css">
</head>
<body>
  <main class="container">
    <section class="card" id="maintenanceCard" aria-labelledby="pageTitle">
      <div class="header" style="display:flex;justify-content:space-between;align-items:flex-start;gap:16px;flex-wrap:wrap">
        <div class="brand">
          <div class="logo" aria-hidden="true">HCS</div>
          <div>
            <h1 id="pageTitle">ุฅุฏุงุฑุฉ ุตูุงูุฉ ุงููุฑูุจุงุช</h1>
            <div class="subtitle" id="pageSubtitle">ุนุฑุถ ูุฅุฏุงุฑุฉ ุณุฌูุงุช ุตูุงูุฉ ุงููุฑูุจุงุช</div>
          </div>
        </div>
        <div style="text-align:right">
          <a href="/vehicle_management/public/index.html" class="btn ghost" style="text-decoration:none;margin-bottom:8px">๐ ุงูุนูุฏุฉ ุฅูู ุงูุฑุฆูุณูุฉ</a>
          <div class="meta" id="orgName">HCS Department</div>
          <div class="userInfo" id="loggedUser">---</div>
        </div>
      </div>
      
      <!-- Search and Filter Section -->
      <div class="search-section">
        <div class="search-row">
          <input type="text" id="searchInput" class="search-input" placeholder="๐ ุจุญุซ: ุฑูู ุงููุฑูุจุฉุ ุงููููุน..." data-i18n-placeholder="search_placeholder" />
          <select id="typeFilter" class="filter-select" data-i18n-label="label_maintenance_type">
            <option value="" data-i18n="filter_all_types">ูู ุงูุฃููุงุน</option>
            <option value="Routine" data-i18n="type_routine">ุตูุงูุฉ ุฏูุฑูุฉ</option>
            <option value="Emergency" data-i18n="type_emergency">ุตูุงูุฉ ุทุงุฑุฆุฉ</option>
            <option value="Technical Check" data-i18n="type_technical">ูุญุต ููู</option>
            <option value="Mechanical Repair" data-i18n="type_mechanical">ุฅุตูุงุญ ูููุงูููู</option>
            <option value="Other" data-i18n="type_other">ุฃุฎุฑู</option>
          </select>
          <select id="deptFilter" class="filter-select">
            <option value="" data-i18n="filter_all_depts">ูู ุงูุฅุฏุงุฑุงุช</option>
          </select>
          <select id="sectionFilter" class="filter-select">
            <option value="" data-i18n="filter_all_sections">ูู ุงูุฃูุณุงู</option>
          </select>
          <select id="divisionFilter" class="filter-select">
            <option value="" data-i18n="filter_all_divisions">ูู ุงูุดุนุจ</option>
          </select>
          <button id="searchBtn" class="btn" type="button" data-i18n="btn_search">๐ ุจุญุซ</button>
          <button id="addNewBtn" class="btn success" type="button" data-i18n="btn_add">โ ุฅุถุงูุฉ ุตูุงูุฉ</button>
        </div>
      </div>

      <!-- Results Table Section -->
      <div id="resultsSection" class="results-section" style="display:none;">
        <div class="results-header">
          <h2><span data-i18n="results_count">ูุชุงุฆุฌ ุงูุจุญุซ</span> (<span id="totalCount">0</span>)</h2>
        </div>
        <div class="table-container">
          <table id="maintenanceTable" class="maintenance-table">
            <thead>
              <tr>
                <th data-i18n="table_header_id">ID</th>
                <th data-i18n="table_header_vehicle_code">ุฑูู ุงููุฑูุจุฉ</th>
                <th data-i18n="label_driver">ุงูุณุงุฆู</th>
                <th data-i18n="label_department">ุงูุฅุฏุงุฑุฉ</th>
                <th data-i18n="label_section">ุงููุณู</th>
                <th data-i18n="label_division">ุงูุดุนุจุฉ</th>
                <th data-i18n="table_header_visit_date">ุชุงุฑูุฎ ุงูุฒูุงุฑุฉ</th>
                <th data-i18n="table_header_next_visit">ุงูุฒูุงุฑุฉ ุงููุงุฏูุฉ</th>
                <th data-i18n="table_header_type">ููุน ุงูุตูุงูุฉ</th>
                <th data-i18n="table_header_location">ุงููููุน</th>
                <th data-i18n="table_header_actions">ุงูุฅุฌุฑุงุกุงุช</th>
              </tr>
            </thead>
            <tbody id="maintenanceTableBody">
              <!-- Results will be inserted here by JS -->
            </tbody>
          </table>
        </div>
        <div class="pagination" id="pagination">
          <!-- Pagination controls will be inserted here by JS -->
        </div>
      </div>

      <!-- Add/Edit Form Section -->
      <div id="formSection" class="form-section" style="display:none;">
        <h2 id="formTitle" data-i18n="form_title_add">ูููุฐุฌ ุงูุตูุงูุฉ</h2>
        <form id="maintenanceForm" autocomplete="off" novalidate>
          <div class="form-row">
            <div class="col">
              <label for="vehicle_code" data-i18n="label_vehicle_code">ุฑูู ุงููุฑูุจุฉ *</label>
              <input type="text" id="vehicle_code" name="vehicle_code" class="form-control" list="vehiclesList" placeholder="ุงูุชุจ ุฃู ุงุฎุชุฑ ุฑูู ุงููุฑูุจุฉ" data-i18n-placeholder="select_vehicle" required />
              <datalist id="vehiclesList"></datalist>
              <div id="vehicleDetails" style="margin-top:8px;font-size:0.75rem;color:var(--muted);display:none;">
                <div><strong data-i18n="label_driver">ุงูุณุงุฆู:</strong> <span id="detailDriver">-</span></div>
                <div><strong data-i18n="label_department">ุงูุฅุฏุงุฑุฉ:</strong> <span id="detailDept">-</span></div>
                <div><strong data-i18n="label_section">ุงููุณู:</strong> <span id="detailSection">-</span></div>
                <div><strong data-i18n="label_division">ุงูุดุนุจุฉ:</strong> <span id="detailDivision">-</span></div>
              </div>
            </div>
            <div class="col">
              <label for="maintenance_type" data-i18n="label_maintenance_type">ููุน ุงูุตูุงูุฉ *</label>
              <select id="maintenance_type" name="maintenance_type" class="form-control" required>
                <option value="" data-i18n="select_type">ุงุฎุชุฑ ุงูููุน</option>
                <option value="Routine" data-i18n="type_routine">ุตูุงูุฉ ุฏูุฑูุฉ</option>
                <option value="Emergency" data-i18n="type_emergency">ุตูุงูุฉ ุทุงุฑุฆุฉ</option>
                <option value="Technical Check" data-i18n="type_technical">ูุญุต ููู</option>
                <option value="Mechanical Repair" data-i18n="type_mechanical">ุฅุตูุงุญ ูููุงูููู</option>
                <option value="Other" data-i18n="type_other">ุฃุฎุฑู</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="col">
              <label for="visit_date" data-i18n="label_visit_date">ุชุงุฑูุฎ ุงูุฒูุงุฑุฉ *</label>
              <input id="visit_date" name="visit_date" type="date" class="form-control" required />
            </div>
            <div class="col">
              <label for="next_visit_date" data-i18n="label_next_visit_date">ุชุงุฑูุฎ ุงูุฒูุงุฑุฉ ุงููุงุฏูุฉ</label>
              <input id="next_visit_date" name="next_visit_date" type="date" class="form-control" />
            </div>
          </div>
          <div class="form-row">
            <div class="col">
              <label for="location" data-i18n="label_location">ุงููููุน</label>
              <input id="location" name="location" class="form-control" placeholder="ูุซุงู: ูุฑุดุฉ ุงูุตูุงูุฉ ุงูุฑุฆูุณูุฉ" data-i18n-placeholder="placeholder_location" />
            </div>
          </div>
          <div class="form-row">
            <div class="col">
              <label for="notes" data-i18n="label_notes">ููุงุญุธุงุช</label>
              <textarea id="notes" name="notes" class="form-control" rows="4" placeholder="ููุงุญุธุงุช ุฅุถุงููุฉ..." data-i18n-placeholder="placeholder_notes"></textarea>
            </div>
          </div>
          <div class="actions">
            <button id="submitBtn" class="btn success" type="submit" data-i18n="btn_save">๐พ ุญูุธ</button>
            <button id="cancelBtn" type="button" class="btn ghost" data-i18n="btn_cancel">โ ุฅูุบุงุก</button>
          </div>
          <div id="msg" class="form-help" role="status" aria-live="polite"></div>
        </form>
      </div>
    </section>
  </main>
  <script src="/vehicle_management/assets/js/Vehicle_Maintenance.js"></script>
</body>
</html>
