<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>إدارة المركبات</title>
  <link rel="stylesheet" href="/vehicle_management/assets/css/add_Vehicles.css">
</head>
<body>
  <main class="container">
    <!-- Search/Filter Section -->
    <section class="card search-card" id="searchCard">
      <div class="header">
        <div class="brand">
          <div class="logo" aria-hidden="true">HCS</div>
          <div>
            <h1 id="pageTitle">إدارة المركبات</h1>
            <div class="subtitle" id="pageSubtitle">بحث وعرض قائمة المركبات</div>
          </div>
        </div>
        <div style="text-align:right">
          <div class="meta" id="orgName">HCS Department</div>
          <div class="userInfo" id="loggedUser">---</div>
        </div>
      </div>
      
      <div class="search-controls">
        <div class="search-row">
          <input type="text" id="searchInput" class="form-control" placeholder="بحث (رقم المركبة، الرمز الوظيفي، السائق، الهاتف)..." />
          <select id="statusFilter" class="form-control">
            <option value="">جميع الحالات</option>
            <option value="operational">قيد التشغيل</option>
            <option value="maintenance">صيانة</option>
            <option value="out_of_service">خارج الخدمة</option>
          </select>
          <select id="perPageSelect" class="form-control">
            <option value="10">10</option>
            <option value="30" selected>30</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
          <button id="addNewBtn" class="btn">+ إضافة مركبة</button>
        </div>
      </div>
      
      <div id="vehiclesList"></div>
      
      <div id="paginationControls" class="pagination-controls"></div>
    </section>

    <!-- Add/Edit Form (hidden by default) -->
    <section class="card form-card" id="vehicleFormCard" style="display:none;">
      <div class="header">
        <div class="brand">
          <div class="logo" aria-hidden="true">HCS</div>
          <div>
            <h1 id="formTitle">إضافة مركبة جديدة</h1>
            <div class="subtitle">أدخل بيانات المركبة</div>
          </div>
        </div>
      </div>
      
      <form id="vehicleForm" autocomplete="off" novalidate>
        <input type="hidden" name="id" id="vehicleId" />
        
        <div class="form-row">
          <div class="col">
            <label for="plate_number">رقم المركبة (vehicle_code)</label>
            <input id="plate_number" name="plate_number" class="form-control" placeholder="مثال: 12345" required />
          </div>
          <div class="col">
            <label for="type">النوع (type)</label>
            <input id="type" name="type" class="form-control" placeholder="مثال: شاحنة" />
          </div>
        </div>
        
        <div class="form-row">
          <div class="col">
            <label for="year">سنة الصنع</label>
            <input id="year" name="year" type="number" min="1900" max="2099" class="form-control" />
          </div>
          <div class="col">
            <label for="vehicle_mode">نمط المركبة</label>
            <select id="vehicle_mode" name="vehicle_mode" class="form-control">
              <option value="shift">خدمة/وردية</option>
              <option value="private">خاصة</option>
            </select>
          </div>
        </div>
        
        <div class="form-row">
          <div class="col">
            <label for="emp_id">الرمز الوظيفي (emp_id)</label>
            <input id="emp_id" name="emp_id" class="form-control" readonly />
          </div>
          <div class="col">
            <label for="assigned_user_id">ID المستخدم المكلف</label>
            <input id="assigned_user_id" name="assigned_user_id" class="form-control" />
          </div>
        </div>
        
        <div class="form-row">
          <div class="col">
            <label for="driver_name">اسم السائق</label>
            <input id="driver_name" name="driver_name" class="form-control" />
          </div>
          <div class="col">
            <label for="driver_phone">هاتف السائق</label>
            <input id="driver_phone" name="driver_phone" class="form-control" />
          </div>
        </div>
        
        <hr style="margin:14px 0;border-top:1px solid var(--border)">
        
        <div class="form-row">
          <div class="col">
            <label for="department_id">الإدارة</label>
            <select id="department_id" name="department_id" class="form-control"></select>
          </div>
          <div class="col">
            <label for="section_id">القسم</label>
            <select id="section_id" name="section_id" class="form-control"></select>
          </div>
        </div>
        
        <div class="form-row">
          <div class="col">
            <label for="division_id">الشعبة</label>
            <select id="division_id" name="division_id" class="form-control"></select>
          </div>
          <div class="col">
            <label for="status">الحالة</label>
            <select id="status" name="status" class="form-control">
              <option value="operational">قيد التشغيل</option>
              <option value="maintenance">صيانة</option>
              <option value="out_of_service">خارج الخدمة</option>
            </select>
          </div>
        </div>
        
        <div class="form-row">
          <div class="col">
            <label for="notes">ملاحظات</label>
            <textarea id="notes" name="notes" class="form-control"></textarea>
          </div>
        </div>
        
        <div class="actions">
          <button id="submitBtn" class="btn" type="submit">حفظ المركبة</button>
          <button id="cancelFormBtn" type="button" class="btn ghost">إلغاء</button>
        </div>
        
        <div id="formMsg" class="form-help" role="status" aria-live="polite"></div>
      </form>
    </section>
  </main>
  
  <script src="/vehicle_management/assets/js/add_Vehicles.js"></script>
</body>
</html>