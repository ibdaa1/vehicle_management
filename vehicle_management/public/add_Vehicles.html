<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ØªØ³Ø¬ÙŠÙ„ Ù…Ø±ÙƒØ¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</title>
  <link rel="stylesheet" href="/vehicle_management/assets/css/add_Vehicles.css">
  <style>
    :root{
      --bg: #fbfdfb;
      --card: #fff;
      --primary: #254b2a;
      --accent: #3f6e3f;
      --muted: #bda36b;
      --text: #0f2a18;
      --border: #e9efe9;
      --radius: 12px;
    }
    html,body{height:100%;margin:0;font-family:"Tajawal",system-ui,Arial,sans-serif;background:var(--bg);color:var(--text)}
    .container{max-width:980px;margin:28px auto;padding:16px}
    .card{background:var(--card);border-radius:var(--radius);padding:18px;border:1px solid var(--border);box-shadow:0 6px 22px rgba(15,40,20,0.04)}
    .header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--primary),var(--accent));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:18px}
    h1{margin:0;font-size:1.25rem;color:var(--primary)}
    .subtitle{color:var(--muted);font-size:0.95rem}
    .meta{color:var(--muted);font-weight:600}
    .userInfo{font-size:0.95rem;color:var(--text);font-weight:600}
    form .form-row{display:flex;gap:12px;margin-top:12px;flex-wrap:wrap}
    .col{flex:1;min-width:160px}
    label{display:block;margin-bottom:8px;font-weight:700;color:var(--text)}
    input,select,textarea{height:44px;padding:10px;border-radius:8px;border:1px solid var(--border);background:#fff;font-size:15px;width:100%;box-sizing:border-box;color:var(--text)}
    textarea{height:110px;padding:10px;min-height:96px}
    .actions{display:flex;gap:10px;margin-top:16px;align-items:center;justify-content:flex-end}
    .btn{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:8px;border:0;background:var(--primary);color:#fff;cursor:pointer;font-weight:700}
    .btn.ghost{background:#fff;color:var(--text);border:1px solid var(--border)}
    .select-row .form-control{width:48%}
    @media(max-width:640px){ .select-row .form-control{width:100%} .form-row{flex-direction:column} }
    .form-help{margin-top:12px;font-size:0.95rem;color:var(--muted)}
  </style>
</head>
<body>
  <main class="container">
    <section class="card" id="vehicleCard" aria-labelledby="pageTitle">
      <div class="header">
        <div class="brand">
          <div class="logo" aria-hidden="true">HCS</div>
          <div>
            <h1 id="pageTitle">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</h1>
            <div class="subtitle" id="pageSubtitle">Ø¨Ø­Ø«ØŒ Ø¥Ø¶Ø§ÙØ©ØŒ ØªØ¹Ø¯ÙŠÙ„ØŒ ÙˆØ­Ø°Ù Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</div>
          </div>
        </div>
        <div style="text-align:right">
          <div class="meta" id="orgName">HCS Department</div>
          <div class="userInfo" id="loggedUser">---</div>
        </div>
      </div>
      
      <!-- Search and Filter Section -->
      <div class="search-section">
        <div class="search-row">
          <input type="text" id="searchInput" class="search-input" placeholder="ğŸ” Ø¨Ø­Ø«: Ø±Ù‚Ù… Ø§Ù„Ù…Ø±ÙƒØ¨Ø©ØŒ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙˆØ¸ÙŠÙÙŠØŒ Ø§Ø³Ù… Ø§Ù„Ø³Ø§Ø¦Ù‚ØŒ Ù‡Ø§ØªÙ Ø§Ù„Ø³Ø§Ø¦Ù‚..." />
          <select id="statusFilter" class="filter-select">
            <option value="">ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
            <option value="operational">âœ… Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„</option>
            <option value="maintenance">ğŸ”§ ØµÙŠØ§Ù†Ø©</option>
            <option value="out_of_service">âŒ Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©</option>
          </select>
          <button id="searchBtn" class="btn" type="button">ğŸ” Ø¨Ø­Ø«</button>
          <button id="addNewBtn" class="btn success" type="button">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø±ÙƒØ¨Ø©</button>
        </div>
      </div>

      <!-- Results Table Section -->
      <div id="resultsSection" class="results-section" style="display:none;">
        <div class="results-header">
          <h2>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« (<span id="totalCount">0</span>)</h2>
        </div>
        <div class="table-container">
          <table id="vehiclesTable" class="vehicles-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Ø±Ù‚Ù… Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</th>
                <th>Ø§Ù„Ø³Ø§Ø¦Ù‚</th>
                <th>Ù‡Ø§ØªÙ Ø§Ù„Ø³Ø§Ø¦Ù‚</th>
                <th>Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</th>
                <th>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</th>
                <th>Ø§Ù„Ù‚Ø³Ù…</th>
                <th>Ø§Ù„Ø´Ø¹Ø¨Ø©</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
              </tr>
            </thead>
            <tbody id="vehiclesTableBody">
              <!-- Results will be inserted here by JS -->
            </tbody>
          </table>
        </div>
        <div class="pagination" id="pagination">
          <!-- Pagination controls will be inserted here by JS -->
        </div>
      </div>

      <!-- Add/Edit Form Section -->
      <div id="formSection" class="form-section" style="display:none;">
        <h2 id="formTitle">Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</h2>
        <form id="vehicleForm" autocomplete="off" novalidate data-department-id="1" data-division-id="1">
        <div class="form-row">
          <div class="col">
            <label for="plate_number" id="lbl_plate">Ø±Ù‚Ù… Ø§Ù„Ù…Ø±ÙƒØ¨Ø© (vehicle_code)</label>
            <input id="plate_number" name="plate_number" class="form-control" placeholder="Ù…Ø«Ø§Ù„: 12345" required />
          </div>
          <div class="col">
            <label for="type" id="lbl_type">Ø§Ù„Ù†ÙˆØ¹ (type)</label>
            <input id="type" name="type" class="form-control" placeholder="Ù…Ø«Ø§Ù„: Ø´Ø§Ø­Ù†Ø©" />
          </div>
        </div>
        <div class="form-row">
          <div class="col">
            <label for="year" id="lbl_year">Ø³Ù†Ø© Ø§Ù„ØµÙ†Ø¹</label>
            <input id="year" name="year" type="number" min="1900" max="2099" class="form-control" />
          </div>
          <div class="col">
            <label for="vehicle_mode" id="lbl_mode">Ù†Ù…Ø· Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</label>
            <select id="vehicle_mode" name="vehicle_mode" class="form-control"></select>
          </div>
        </div>
        <div class="form-row">
          <div class="col">
            <label for="emp_id" id="lbl_emp">Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙˆØ¸ÙŠÙÙŠ (emp_id)</label>
            <input id="emp_id" name="emp_id" class="form-control" placeholder="Ø³ÙŠÙÙ…Ù„Ø£ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø©" readonly />
          </div>
          <div class="col">
            <label for="assigned_user_id" id="lbl_assigned">ID Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙƒÙ„Ù</label>
            <input id="assigned_user_id" name="assigned_user_id" class="form-control" />
          </div>
        </div>
        <div class="form-row">
          <div class="col">
            <label for="driver_name" id="lbl_driver">Ø§Ø³Ù… Ø§Ù„Ø³Ø§Ø¦Ù‚</label>
            <input id="driver_name" name="driver_name" class="form-control" />
          </div>
          <div class="col">
            <label for="driver_phone" id="lbl_driver_phone">Ù‡Ø§ØªÙ Ø§Ù„Ø³Ø§Ø¦Ù‚</label>
            <input id="driver_phone" name="driver_phone" class="form-control" />
          </div>
        </div>
        <hr style="margin:14px 0;border-top:1px solid var(--border)">
        <div class="form-row select-row">
          <select id="department_id" name="department_id" class="form-control"></select>
          <select id="section_id" name="section_id" class="form-control"></select>
        </div>
        <div class="form-row select-row" style="margin-top:10px">
          <select id="division_id" name="division_id" class="form-control"></select>
          <select id="status" name="status" class="form-control"></select>
        </div>
        <div class="form-row">
          <div class="col">
            <label for="notes" id="lbl_notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
            <textarea id="notes" name="notes" class="form-control"></textarea>
          </div>
        </div>
        <div class="actions">
          <button id="submitBtn" class="btn success" type="submit">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</button>
          <button id="cancelBtn" type="button" class="btn ghost">âŒ Ø¥Ù„ØºØ§Ø¡</button>
        </div>
        <div id="msg" class="form-help" role="status" aria-live="polite"></div>
      </form>
      </div>
    </section>
  </main>
  <script src="/vehicle_management/assets/js/add_Vehicles.js"></script>
</body>
</html>